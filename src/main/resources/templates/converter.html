<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Converter</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../static/css/main.css" th:href="@{/css/main.css}" />
</head>
<body>
<div th:substituteby="index::logout"></div>
<div th:substituteby="index::notleggedin"></div>
<div class="converter-menu">
    <form action="#" th:action="@{/converter}" method="POST">
        <label for="initialCurrencyId"></label>
        <select class="form-control" id="initialCurrencyId" name="initialCurrencyId">
        <option value="">Выберете исходную валюту</option>
        <option th:each="currency : ${currencyList}"
                th:value="${currency.id}"
                th:text="${currency.charCode}+' ('+${currency.name} + ')'"
                th:selected="${currency.id.equals(initialCurrencyId)}"></option>
    </select>

        <label for="goalCurrencyId"></label>
        <select class="form-control" id="goalCurrencyId" name="goalCurrencyId">
        <option value="">Выберете итоговую валюту</option>
        <option th:each="currency : ${currencyList}"
                th:value="${currency.id}"
                th:text="${currency.charCode}+' ('+${currency.name} + ')'"
                th:selected="${currency.id.equals(goalCurrencyId)}"></option>
    </select>
        <br/>
        <label>
            <input type="text" name="initialValue" th:value="${initialValue}"/>
        </label>
        <input type="submit" value="Конвертировать.">
        <label>
            <input type="text" name="goalValue" th:value="${goalValue}" th:readonly="${true}"/>
        </label>
        <p th:if="${requestError}" class="error">Проверьте введенное количество валюты.</p>
    </form>
</div>
<div class="convert-history">
        <table th:if="${userHistory.hasContent()}">
            <tr>
                <th>Дата запроса</th>
                <th>Первоначальная валюта</th>
                <th>Первоначальное сумма</th>
                <th>Итоговая валюта</th>
                <th>Итоговая сумма</th>
            </tr>
            <tr th:each="history : ${userHistory.content}">
                <td th:text="${history.queryDate}"></td>
                <td th:text="${history.initialCurrency}"></td>
                <td th:text="${history.initialSum}"></td>
                <td th:text="${history.goalCurrency}"></td>
                <td th:text="${history.goalSum}"></td>
            </tr>
        </table>
</div>
</body>
</html>